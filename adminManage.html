<!DOCTYPE html>
<html>

<head>
    <!-- 页面meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">




    <title>数据 - AdminLTE2定制版</title>
    <meta name="description" content="AdminLTE2定制版">
    <meta name="keywords" content="AdminLTE2定制版">





    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">

  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>



    <link rel="stylesheet" href="./plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="./plugins/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="./plugins/iCheck/square/blue.css">
    <link rel="stylesheet" href="./plugins/morris/morris.css">
    <link rel="stylesheet" href="./plugins/jvectormap/jquery-jvectormap-1.2.2.css">
    <link rel="stylesheet" href="./plugins/datepicker/datepicker3.css">
    <link rel="stylesheet" href="./plugins/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" href="./plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
    <link rel="stylesheet" href="./plugins/datatables/dataTables.bootstrap.css">
    <link rel="stylesheet" href="./plugins/treeTable/jquery.treetable.css">
    <link rel="stylesheet" href="./plugins/treeTable/jquery.treetable.theme.default.css">
    <link rel="stylesheet" href="./plugins/select2/select2.css">
    <link rel="stylesheet" href="./plugins/colorpicker/bootstrap-colorpicker.min.css">
    <link rel="stylesheet" href="./plugins/bootstrap-markdown/css/bootstrap-markdown.min.css">
    <link rel="stylesheet" href="./plugins/adminLTE/css/AdminLTE.css">
    <link rel="stylesheet" href="./plugins/adminLTE/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./plugins/ionslider/ion.rangeSlider.css">
    <link rel="stylesheet" href="./plugins/ionslider/ion.rangeSlider.skinNice.css">
    <link rel="stylesheet" href="./plugins/bootstrap-slider/slider.css">
    <link rel="stylesheet" href="./plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.css">
</head>

<body class="hold-transition skin-purple sidebar-mini">

    <div class="wrapper">

        <!-- 页面头部 -->
        <div id="header"></div>
        <!-- 页面头部 /-->

        <!-- 导航侧栏 -->
        <div id="aside"></div>
        <!-- 导航侧栏 /-->

        <div class="content-wrapper">

            <!-- 内容头部 -->
            <section class="content-header">
                <h1>
                    用户管理
                    <small>后台人员列表</small>
                </h1>
                <ol class="breadcrumb">
                    <li><a href="index.html"><i class="fa fa-dashboard"></i>首页</a></li>
                    <li><a href="#">用户管理</a></li>
                    <li class="active">后台人员列表</li>
                </ol>
            </section>
            <!-- 内容头部 /-->

            <!-- 正文区域 -->
            <section class="content">

                <!-- .box-body -->
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">后台人员列表</h3>
                    </div>

                    <div class="box-body">

                        <!-- 数据表格 -->
                        <div class="table-box">

                            <!--工具栏-->
                            <div class="pull-left">
                                <div class="form-group form-inline">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-default" title="新建" data-toggle="modal" data-target="#myModal2"><i class="fa fa-trash-o"></i> 新建</button>
                                        <button type="button" class="btn btn-default" title="删除" id="del"><i class="fa fa-trash-o"></i> 删除</button>
                                        <button type="button" class="btn btn-default" title="刷新" onclick="window.location.reload()"><i class="fa fa-refresh"></i> 刷新</button>
                                    </div>
                                </div>
                            </div>
                            <div class="box-tools pull-right">
                                <div class="has-feedback">
                                    <input type="text" class="form-control input-sm" placeholder="搜索" id="searchValue">
                                    <span class="glyphicon glyphicon-search form-control-feedback"></span>
                                </div>
                            </div>
                            <!--工具栏/-->

                            <!--数据列表-->
                            <table id="dataList" class="table table-bordered table-striped table-hover dataTable">
                                <thead>
                                    <tr>
                                        <th class="text-center" style="padding-right:0px;">
                                            <input id="selall" type="checkbox" class="icheckbox_square-blue">
                                        </th>
                                        <th class="text-center">ID</th>
                                        <th class="text-center">名称</th>
                                        <th class="text-center">添加时间</th>
                                        <th class="text-center">状态</th>
                                        <th class="text-center">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="adminList">


                                </tbody>
                                <!--
                            <tfoot>
                            <tr>
                            <th>Rendering engine</th>
                            <th>Browser</th>
                            <th>Platform(s)</th>
                            <th>Engine version</th>
                            <th>CSS grade</th>
                            </tr>
                            </tfoot>-->
                            </table>
                            <!--数据列表/-->
                        </div>
                        <!-- 数据表格 /-->


                    </div>
                    <!-- /.box-body -->

                    <!-- .box-footer-->
                    <div class="box-footer">
                        <div class="pull-left">
                            <div class="form-group form-inline" id="pageData">
                                总共2 页，共14 条数据。
                            </div>
                        </div>

                        <div class="box-tools pull-right">
                            <ul class="pagination" id="pages">
                                <li>
                                    <a href="#" aria-label="Previous">首页</a>
                                </li>
                                <li><a href="#">上一页</a></li>
                                <li class="active"><a href="#">1</a></li>
                                <li><a href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#">5</a></li>
                                <li><a href="#">下一页</a></li>
                                <li>
                                    <a href="#" aria-label="Next">尾页</a>
                                </li>
                            </ul>
                        </div>

                    </div>
                    <!-- /.box-footer-->



                </div>

            </section>
            <!-- 正文区域 /-->

        </div>
        <!-- @@close -->
        <!-- 内容区域 /-->

        <!-- 底部导航 -->
        <footer class="main-footer">
            <div class="pull-right hidden-xs">
                <b>Version</b> 1.0.8
            </div>
            <strong>Copyright &copy; 2014-2017 <a href="http://www.itcast.cn">研究院研发部</a>.</strong> All rights reserved.
        </footer>
        <!-- 底部导航 /-->

    </div>
    <div id="myModal1" class="modal modal-primary" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">重置密码</h4>
                </div>
                <div class="modal-body">


                    <div class="box-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">密码:</label>
                                <div class="col-sm-5">
                                    <input type="text" id="password" class="form-control" placeholder="密码" value="">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" data-dismiss="modal">关闭</button>
                    <button type="button" id="PaSave" class="btn btn-outline" data-dismiss="modal">保存</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>

        <!-- /.modal-dialog -->
    </div>
    <div id="myModal2" class="modal modal-primary"role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">新建管理员</h4>
                </div>
                <div class="modal-body">


                    <div class="box-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">名称:</label>
                                <div class="col-sm-5">
                                    <input type="text" class="form-control" placeholder="名称" value="" id="newUsername">
                                    <span id="verify" style="color: red"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">密码:</label>
                                <div class="col-sm-5">
                                    <input type="text" class="form-control" placeholder="密码" value="" id="newPassword">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">状态:</label>
                                <div class="col-md-4 data">
                                    <select class="form-control" id="newStatus">
                                        <option value="1">开启</option>
                                        <option value="0">关闭</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">不可访问模块:</label>
                                <div class="col-sm-5">
                                    <div class="checkbox" id="newAuth">
                                        <label><input type="checkbox" name="c1" value="/user/">客户管理</label>
                                        <label><input type="checkbox" name="c1" value="/admin/" checked> 后台人员管理</label>
                                        <label><input type="checkbox" name="c1" value="/order/"> 订单管理</label>
                                        <label><input type="checkbox" name="c1" value="/goods/"> 商品管理</label>
                                        <label><input type="checkbox" name="c1" value="/assess/"> 评价管理</label>
                                        <label><input type="checkbox" name="c1" value="/information/"> 信息管理</label>
                                        <label><input type="checkbox" name="c1" value="/logs/"> 日志查看</label>
                                        <label><input type="checkbox" name="c1" value="/message/"> 消息推送</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-outline" data-dismiss="modal" id="newSave">保存</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>

        <!-- /.modal-dialog -->
    </div>
    <div id="myModal3" class="modal modal-primary"role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">权限管理</h4>
                </div>
                <div class="modal-body">


                    <div class="box-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">不可访问模块:</label>
                                <div class="col-sm-5">
                                    <div class="checkbox" id="Auth">
                                        <label><input type="checkbox" name="c1" value="/user/">客户管理</label>
                                        <label><input type="checkbox" name="c1" value="/admin/"> 后台人员管理</label>
                                        <label><input type="checkbox" name="c1" value="/order/"> 订单管理</label>
                                        <label><input type="checkbox" name="c1" value="/goods/"> 商品管理</label>
                                        <label><input type="checkbox" name="c1" value="/assess/"> 评价管理</label>
                                        <label><input type="checkbox" name="c1" value="/information/"> 信息管理</label>
                                        <label><input type="checkbox" name="c1" value="/logs/"> 日志查看</label>
                                        <label><input type="checkbox" name="c1" value="/message/"> 消息推送</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" data-dismiss="modal">关闭</button>
                    <button type="button" id="authSave" class="btn btn-outline" data-dismiss="modal">保存</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>

        <!-- /.modal-dialog -->
    </div>
    <div id="myModal4" class="modal modal-primary"role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">新建管理员</h4>
                </div>
                <div class="modal-body">


                    <div class="box-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">状态:</label>
                                <div class="col-md-4 data">
                                    <select class="form-control" id="status">
                                        <option value="true">启用</option>
                                        <option value="false">停用</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-outline" data-dismiss="modal" id="StSave">保存</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>

        <!-- /.modal-dialog -->
    </div>
    <script src="./plugins/jQuery/jquery-2.2.3.min.js"></script>
    <script src="./plugins/jQueryUI/jquery-ui.min.js"></script>
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>
    <script src="./plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="./plugins/raphael/raphael-min.js"></script>
    <script src="./plugins/morris/morris.min.js"></script>
    <script src="./plugins/sparkline/jquery.sparkline.min.js"></script>
    <script src="./plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="./plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="./plugins/knob/jquery.knob.js"></script>
    <script src="./plugins/daterangepicker/moment.min.js"></script>
    <script src="./plugins/daterangepicker/daterangepicker.js"></script>
    <script src="./plugins/daterangepicker/daterangepicker.zh-CN.js"></script>
    <script src="./plugins/datepicker/bootstrap-datepicker.js"></script>
    <script src="./plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js"></script>
    <script src="./plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <script src="./plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <script src="./plugins/fastclick/fastclick.js"></script>
    <script src="./plugins/iCheck/icheck.min.js"></script>
    <script src="./plugins/adminLTE/js/app.min.js"></script>
    <script src="./plugins/treeTable/jquery.treetable.js"></script>
    <script src="./plugins/select2/select2.full.min.js"></script>
    <script src="./plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
    <script src="./plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.zh-CN.js"></script>
    <script src="./plugins/bootstrap-markdown/js/bootstrap-markdown.js"></script>
    <script src="./plugins/bootstrap-markdown/locale/bootstrap-markdown.zh.js"></script>
    <script src="./plugins/bootstrap-markdown/js/markdown.js"></script>
    <script src="./plugins/bootstrap-markdown/js/to-markdown.js"></script>
    <script src="./plugins/input-mask/jquery.inputmask.js"></script>
    <script src="./plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
    <script src="./plugins/input-mask/jquery.inputmask.extensions.js"></script>
    <script src="./plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="./plugins/datatables/dataTables.bootstrap.min.js"></script>
    <script src="./plugins/chartjs/Chart.min.js"></script>
    <script src="./plugins/flot/jquery.flot.min.js"></script>
    <script src="./plugins/flot/jquery.flot.resize.min.js"></script>
    <script src="./plugins/flot/jquery.flot.pie.min.js"></script>
    <script src="./plugins/flot/jquery.flot.categories.min.js"></script>
    <script src="./plugins/ionslider/ion.rangeSlider.min.js"></script>
    <script src="./plugins/bootstrap-slider/bootstrap-slider.js"></script>
    <script src="./plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
    <script src="./plugins/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="plugins/common.js"></script>
    <script>
        $("#header").load("header.html");
        $("#aside").load("aside.html");
        $(document).ready(function() {
            // 选择框
            $(".select2").select2();

            // WYSIHTML5编辑器
            $(".textarea").wysihtml5({
                locale: 'zh-CN'
            });
        });


        // 设置激活菜单
        function setSidebarActive(tagUri) {
            var liObj = $("#" + tagUri);
            if (liObj.length > 0) {
                liObj.parent().parent().addClass("active");
                liObj.addClass("active");
            }
        }


        $(document).ready(function() {

            // 激活导航位置
            setSidebarActive("admin-datalist");

            // 列表按钮 
            $("#dataList td input[type='checkbox']").iCheck({
                checkboxClass: 'icheckbox_square-blue',
                increaseArea: '20%'
            });
            // 全选操作 
            $("#selall").click(function() {
                var clicks = $(this).is(':checked');
                if (!clicks) {
                    $("#dataList td input[type='checkbox']").iCheck("uncheck");
                } else {
                    $("#dataList td input[type='checkbox']").iCheck("check");
                }
                $(this).data("clicks", !clicks);
            });
        });
    </script>
    <script type="text/javascript">
        var adminList = $("#adminList");
        var pageData = $("#pageData");
        var pages = $("#pages");
        var searchValue = $("#searchValue");
        var del = $("#del");
        var authSave = $("#authSave");
        var stSave = $("#StSave");
        var id;
        load(searchValue.val(),1,10);
        $(function () {
            var newUsername = $("#newUsername");
            var newPassword = $("#newPassword");
            var newSave = $("#newSave");
            var verify = $("#verify");
            del.click(function () {
                var isDel = confirm("您确定要删除吗？");
                var id_array = new Array();
                if(isDel){
                    $('input[name="ids"]:checked').each(function () {
                        id_array.push($(this).val());
                    })
                }
                if(id_array.length==0){
                    window.alert("请选择需要删除的项目");
                }else {
                    var ids = id_array.join(",");
                    $.ajax({
                        url:ipAddr+"/admin/deleteAdminById",
                        type:"get",
                        dataType:"json",
                        data:{
                          ids:ids
                        },
                        xhrFields: {
                            withCredentials: true //允许跨域带Cookie
                        },
                        success:function (flag) {
                            if(flag==true){
                                window.alert("删除成功");
                                window.location.reload();
                            }else {
                                window.alert("删除失败");
                                window.location.reload();
                            }
                        },
                        error:function (XMLHttpRequest, textStatus, errorThrown) {
                            // 状态码
                            console.log(XMLHttpRequest.status);
                            // 状态
                            console.log(XMLHttpRequest.readyState);
                            // 错误信息
                            console.log(textStatus);
                        }
                    });
                }
            });
            newUsername.blur(function () {
                if(newUsername.val()==null||newUsername.val()==""){
                    verify.html('用户名不能为空');
                }else {
                    $.ajax({
                        url:ipAddr+"/admin/selectAdminByName",
                        type:"get",
                        dataType:"json",
                        data:{
                            username:newUsername.val(),
                        },
                        xhrFields: {
                            withCredentials: true //允许跨域带Cookie
                        },
                        success:function (flag) {
                            if(flag==false){
                                verify.html('用户名已存在');
                            }else {
                                verify.html('');
                            }
                        }
                    })
                }
            });
            newSave.click(function () {
                if(newUsername.val()==null||newUsername.val()==""){
                    alert("请输入用户名")
                }
                if(newPassword.val()==null||newPassword.val()==""){
                    alert("请输入密码")
                }
                var temps = new Array();
                var values = new Array();
                temps = $("#newAuth label input:checked");
                for (var i = 0; i < temps.length; i++) {
                    values.push($(temps[i]).val());
                }
                $.ajax({
                    url:ipAddr+"/admin/insertAdmin",
                    type:"post",
                    dataType:"json",
                    data:{
                        username:newUsername.val(),
                        password:newPassword.val(),
                        status:$("#newStatus option:selected").val(),
                        auth:JSON.stringify(values)
                    },
                    xhrFields: {
                        withCredentials: true //允许跨域带Cookie
                    },
                    success:function (flag) {
                        if(flag){
                            alert("新建成功")
                            window.location.reload();
                        }else {
                            alert("新建失败")
                        }
                    }
                })
            });
            $("#PaSave").click(function () {
                if($("#password").val()==""){
                    window.alert("密码不能为空");
                    return;
                }
                $.ajax({
                    url:ipAddr+"/admin/updatePasswordById",
                    data:{
                        id:id,
                        password:$("#password").val()
                    },
                    datatype:"json",
                    type:"get",
                    success:function (flag) {
                        if(flag==true){
                            window.alert("修改成功")
                            window.location.reload();
                        }else {
                            window.alert("修改失败")
                        }
                    },
                    error:function (XMLHttpRequest, textStatus, errorThrown) {
                        // 状态码
                        console.log(XMLHttpRequest.status);
                        // 状态
                        console.log(XMLHttpRequest.readyState);
                        // 错误信息
                        console.log(textStatus);
                    }
                })
            });
            authSave.click(function () {
                var temps = new Array();
                var values = new Array();
                temps = $("#Auth label input:checked");
                for (var i = 0; i < temps.length; i++) {
                    values.push($(temps[i]).val());
                }
                $.ajax({
                    url:ipAddr+"/admin/updateAdminById",
                    data:{
                        id:id,
                        auth:JSON.stringify(values)
                    },
                    dataType:"json",
                    type:"post",
                    xhrFields: {
                        withCredentials: true //允许跨域带Cookie
                    },
                    success:function (flag) {
                        if(flag==true){
                            window.alert("保存成功")
                        }else {
                            window.alert("保存失败")
                        }
                    },
                    error:function (XMLHttpRequest, textStatus, errorThrown) {
                        if(XMLHttpRequest.status==403){
                            alert("权限不足");
                            location.href="index.html"
                        }
                    }
                })
            });
            stSave.click(function () {
                $.ajax({
                    url:ipAddr+"/admin/updateAdminById",
                    data:{
                        id:id,
                        status:$("#status option:selected").val()
                    },
                    dataType:"json",
                    type:"post",
                    xhrFields: {
                        withCredentials: true //允许跨域带Cookie
                    },
                    success:function (flag) {
                        if(flag==true){
                            window.alert("保存成功");
                            window.location.reload();
                        }else {
                            window.alert("保存失败")
                        }
                    },
                    error:function (XMLHttpRequest, textStatus, errorThrown) {
                        // 状态码
                        console.log(XMLHttpRequest.status);
                        // 状态
                        console.log(XMLHttpRequest.readyState);
                        // 错误信息
                        console.log(textStatus);
                    }
                });
            });
            searchValue.click(function () {
                load(searchValue.val(),1,10);
            })
        });
        function getPaId(idTemp) {
            id=idTemp;
        }
        function getVeId(idTemp) {
            id=idTemp;
            var check = $("#Auth label input:checked");
            for (let i = 0; i < check.length; i++) {
                $(check[i]).prop("checked",false);
            }
            $.ajax({
                url:ipAddr+"/admin/selectAdminById",
                data:{
                    id:id
                },
                dataType:"json",
                type:"get",
                xhrFields: {
                    withCredentials: true //允许跨域带Cookie
                },
                success:function (admin) {
                    var temp = $("#Auth label input");
                    var list = admin.authList;
                    for (let i = 0; i < temp.length; i++) {
                        for (let j = 0; j < list.length; j++) {
                            if(list[j]==$(temp[i]).val()){
                                $(temp[i]).prop("checked",true);
                                break;
                            }
                        }
                    }
                },
                error:function (XMLHttpRequest, textStatus, errorThrown) {
                    // 状态码
                    console.log(XMLHttpRequest.status);
                    // 状态
                    console.log(XMLHttpRequest.readyState);
                    // 错误信息
                    console.log(textStatus);
                }
            });
        }
        function getStId(idTemp) {
            id=idTemp;
            $.ajax({
                url:ipAddr+"/admin/selectAdminById",
                data:{
                    id:id
                },
                dataType:"json",
                type:"get",
                xhrFields: {
                    withCredentials: true //允许跨域带Cookie
                },
                success:function (admin) {
                    $("#status option[value='"+admin.status+"']").attr("selected","selected");
                },
                error:function (XMLHttpRequest, textStatus, errorThrown) {
                    if(XMLHttpRequest.status==403){
                        alert("权限不足");
                        location.href="index.html"
                    }
                }
            });
        }
        function load(key,page,rows){
            $.ajax({
                url:ipAddr+"/admin/selectAdminByPage",
                data:{
                    key:key,
                    page:page,
                    rows:rows
                },
                xhrFields: {
                    withCredentials: true //允许跨域带Cookie
                },
                type:"get",
                dataType:"json",
                success:function (pb) {
                    var items = pb.items;
                    var list = '';
                    var pageList='';
                    pageList+='<li onclick="javascript:load(\''+key+'\','+1+','+rows+')"><a href="javascript:void(0)"  aria-label="Previous">首页</a></li>';
                    var before = pb.currentPage - 1;
                    if(before<=1){
                        before=1;
                    }
                    var beforePage = '<li onclick="javascript:load(\''+key+'\','+before+','+rows+')"><a href="javascript:void(0)">上一页</a></li>';
                    pageList+=beforePage;
                    var begin;
                    var end;
                    if(pb.totalPage<10){
                        begin=1;
                        end=pb.totalPage;
                    }else {
                        begin=pb.currentPage-5;
                        end=pb.currentPage+4;
                        if(begin<1){
                            begin=1;
                            end=begin+9;
                        }
                        if(end>pb.totalPage){
                            end=pb.totalPage;
                            begin=end-9;
                        }
                    }
                    var li = '';
                    for(var i = begin;i<=end;i++){
                        if(i==pb.currentPage){
                            li += '<li onclick="javascript:load(\''+key+'\','+i+','+rows+')" class="active"><a href="javascript:void(0)">'+i+'</a></li>';
                        }else {
                            li += '<li onclick="javascript:load(\''+key+'\','+i+','+rows+')"><a href="javascript:void(0)">'+i+'</a></li>';
                        }
                    }
                    pageList+=li;
                    var next = pb.currentPage + 1;
                    if(next>pb.totalPage){
                        next=pb.totalPage;
                    }
                    pageList+='<li onclick="javascript:load(\''+key+'\','+next+','+rows+')"><a href="javascript:void(0)">下一页</a></li>';
                    pageList+='<li onclick="javascript:load(\''+key+'\','+pb.totalPage+','+rows+')"><a href="javascript:void(0)" aria-label="Next">尾页</a></li>';
                    pages.html(pageList);
                    pageData.html('总共'+pb.totalPage+'页，共'+pb.total+'条数据。');
                    for (var i = 0; i < items.length; i++) {
                        var flag;
                        if(items[i].status==true){
                            flag="启用"
                        }else {
                            flag="停用"
                        }
                        list+='<tr class="text-center">\n' +
                            '                                        <td><input name="ids" type="checkbox" value="'+items[i].id+'"></td>\n' +
                            '                                        <td class="text-center">'+items[i].id+'</td>\n' +
                            '                                        <td class="text-center">'+items[i].username+'</td>\n' +
                            '                                        <td class="text-center">'+mill2date(items[i].addTime)+'</td>\n' +
                            '                                        <td class="text-center">'+flag+'</td>\n' +
                            '                                        <td class="text-center">\n' +
                            '                                            <button type="button"  class="btn bg-olive btn-xs" data-toggle="modal" data-target="#myModal1" onclick="getPaId('+items[i].id+')">重置密码</button>\n'+
                            '<button type="button"  class="btn bg-olive btn-xs" data-toggle="modal" data-target="#myModal3" onclick="getVeId('+items[i].id+')">权限管理</button>\n'+
                            '<button type="button"  class="btn bg-olive btn-xs" data-toggle="modal" data-target="#myModal4" onclick="getStId('+items[i].id+')">是否启用</button>'+
                            '                                        </td>\n' +
                            '                                    </tr>';
                    }
                    adminList.html(list);
                },
                error:function (XMLHttpRequest) {
                    if(XMLHttpRequest.status==403){
                        alert("权限不足");
                        location.href="index.html"
                    }
                }
            });
        }
    </script>
</body>

</html>