<!DOCTYPE html>
<html>

<head>
    <!-- 页面meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">




    <title>摄影工作室后台管理</title>
    <meta name="description" content="AdminLTE2定制版">
    <meta name="keywords" content="AdminLTE2定制版">

    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">

  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>

    <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="plugins/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="plugins/iCheck/square/blue.css">
    <link rel="stylesheet" href="plugins/morris/morris.css">
    <link rel="stylesheet" href="plugins/jvectormap/jquery-jvectormap-1.2.2.css">
    <link rel="stylesheet" href="plugins/datepicker/datepicker3.css">
    <link rel="stylesheet" href="plugins/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" href="plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
    <link rel="stylesheet" href="plugins/datatables/dataTables.bootstrap.css">
    <link rel="stylesheet" href="plugins/treeTable/jquery.treetable.css">
    <link rel="stylesheet" href="plugins/treeTable/jquery.treetable.theme.default.css">
    <link rel="stylesheet" href="plugins/select2/select2.css">
    <link rel="stylesheet" href="plugins/colorpicker/bootstrap-colorpicker.min.css">
    <link rel="stylesheet" href="plugins/bootstrap-markdown/css/bootstrap-markdown.min.css">
    <link rel="stylesheet" href="plugins/adminLTE/css/AdminLTE.css">
    <link rel="stylesheet" href="plugins/adminLTE/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="plugins/ionslider/ion.rangeSlider.css">
    <link rel="stylesheet" href="plugins/ionslider/ion.rangeSlider.skinNice.css">
    <link rel="stylesheet" href="plugins/bootstrap-slider/slider.css">
    <link rel="stylesheet" href="plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.css">
</head>

<body class="hold-transition skin-purple sidebar-mini">

    <div class="wrapper">

        <!-- 页面头部 -->
        <div id="header"></div>
        <!-- 页面头部 /-->

        <!-- 导航侧栏 -->
        <div id="aside"></div>
        <!-- 导航侧栏 /-->

        <!-- 内容区域 -->
        <!-- @@master = admin-layout.html-->
        <!-- @@block = content -->

        <div class="content-wrapper">

            <!-- 内容头部 -->
            <section class="content-header">
                <h1>
                    内容管理
                    <small>首页内容</small>
                </h1>
                <ol class="breadcrumb">
                    <li><a href="#"><i class="fa fa-dashboard"></i> 首页</a></li>
                    <li><a href="#">内容管理</a></li>
                    <li class="active">首页内容</li>
                </ol>
            </section>
            <!-- 内容头部 /-->

            <!-- 正文区域 -->
            <section class="content">
                <div class="box box-warning">
                    <div class="box-body">
                        <div class="col-md-2" style="margin-left: 20px">
                        <form role="form">
                            <label>描述图片1(建议尺寸1216*580)</label>
                            <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="desImg1">
                            <img src="" id="desImage1">
                            <div class="form-group">
                                <label>描述1</label>
                                <input type="text" class="form-control col-sm-1" placeholder="描述1" id="des1">
                            </div>
                        </form>
                    </div>
                        <div class="col-md-2" style="margin-left: 20px">
                            <form role="form">
                                <label>描述图片2(建议尺寸1216*580)</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="desImg2">
                                <img src="" id="desImage2">
                                <div class="form-group">
                                    <label>描述2</label>
                                    <input type="text" class="form-control col-sm-1" placeholder="描述2" id="des2">
                                </div>
                            </form>
                        </div>
                        <div class="col-md-2" style=" margin-left: 20px">
                            <form role="form">
                                <label>描述图片3(建议尺寸1216*580)</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="desImg3">
                                <img src="" id="desImage3">
                                <div class="form-group">
                                    <label>描述3</label>
                                    <input type="text" class="form-control col-sm-1" placeholder="描述3" id="des3">
                                </div>
                            </form>
                        </div>
                        <div class="col-md-2" style=" margin-left: 20px">
                            <form role="form">
                                <label>描述图片4(建议尺寸1216*580)</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="desImg4">
                                <img src="" id="desImage4">
                                <div class="form-group">
                                    <label>描述4</label>
                                    <input type="text" class="form-control col-sm-1" placeholder="描述4" id="des4">
                                </div>
                            </form>
                        </div>
                            <div class="form-group col-md-3">
                                <label>工作室描述</label>
                                <textarea class="form-control" rows="11" placeholder="工作室描述" id="des"></textarea>
                            </div>
                    </div>
                    <div class="box-body">
                        <div class="col-md-2" style=" margin-left: 10px">
                            <form role="form">
                                <label>展示图片1</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="img1">
                                <img src="img/timg.jpg" width="30%" height="60%" id="image1">
                            </form>
                        </div>
                        <div class="col-md-2" style=" margin-left: 10px">
                            <form role="form">
                                <label>展示图片2</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="img2">
                                <img src="img/timg.jpg" width="30%" height="60%" id="image2">
                            </form>
                        </div>
                        <div class="col-md-2" style=" margin-left: 10px">
                            <form role="form">
                                <label>展示图片3</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="img3">
                                <img src="img/timg.jpg" width="30%" height="60%" id="image3">
                            </form>
                        </div>
                        <div class="col-md-2" style=" margin-left: 10px;">
                            <form role="form">
                                <label>展示图片4</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="img4">
                                <img src="img/timg.jpg" width="30%" height="60%" id="image4">
                            </form>
                        </div>
                        <div class="col-md-2" style=" margin-left: 10px">
                            <form role="form">
                                <label>展示图片5</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="img5">
                                <img src="img/timg.jpg" width="30%" height="60%" id="image5">
                            </form>
                        </div>
                        <div class="col-md-2" style=" margin-left: 10px">
                            <form role="form">
                                <label>展示图片6</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="img6">
                                <img src="img/timg.jpg" width="30%" height="60%" id="image6">
                            </form>
                        </div>
                        <div class="col-md-2" style=" margin-left: 10px">
                            <form role="form">
                                <label>展示图片7</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="img7">
                                <img src="img/timg.jpg" width="30%" height="60%" id="image7">
                            </form>
                        </div>
                        <div class="col-md-2" style=" margin-left: 10px">
                            <form role="form">
                                <label>展示图片8</label>
                                <input type="file" accept="image/gif, image/jpeg, image/png, image/jpg" id="img8">
                                <img src="img/timg.jpg" width="30%" height="60%" id="image8">
                            </form>
                        </div>
                    </div>
                    <div class="box-footer" style="text-align: center">
                    <button type="button" class="btn btn-primary" id="save">保存修改</button>
                </div>
                    <!-- /.box-body -->
                </div>
            </section>
            <!-- 正文区域 /-->

        </div>
        <!-- @@close -->
        <!-- 内容区域 /-->


    </div>


    <script src="plugins/jQuery/jquery-2.2.3.min.js"></script>
    <script src="plugins/jQueryUI/jquery-ui.min.js"></script>
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>
    <script src="plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="plugins/raphael/raphael-min.js"></script>
    <script src="plugins/morris/morris.min.js"></script>
    <script src="plugins/sparkline/jquery.sparkline.min.js"></script>
    <script src="plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="plugins/knob/jquery.knob.js"></script>
    <script src="plugins/daterangepicker/moment.min.js"></script>
    <script src="plugins/daterangepicker/daterangepicker.js"></script>
    <script src="plugins/daterangepicker/daterangepicker.zh-CN.js"></script>
    <script src="plugins/datepicker/bootstrap-datepicker.js"></script>
    <script src="plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js"></script>
    <script src="plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <script src="plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <script src="plugins/fastclick/fastclick.js"></script>
    <script src="plugins/iCheck/icheck.min.js"></script>
    <script src="plugins/adminLTE/js/app.min.js"></script>
    <script src="plugins/treeTable/jquery.treetable.js"></script>
    <script src="plugins/select2/select2.full.min.js"></script>
    <script src="plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
    <script src="plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.zh-CN.js"></script>
    <script src="plugins/bootstrap-markdown/js/bootstrap-markdown.js"></script>
    <script src="plugins/bootstrap-markdown/locale/bootstrap-markdown.zh.js"></script>
    <script src="plugins/bootstrap-markdown/js/markdown.js"></script>
    <script src="plugins/bootstrap-markdown/js/to-markdown.js"></script>
    <script src="plugins/ckeditor/ckeditor.js"></script>
    <script src="plugins/input-mask/jquery.inputmask.js"></script>
    <script src="plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
    <script src="plugins/input-mask/jquery.inputmask.extensions.js"></script>
    <script src="plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="plugins/datatables/dataTables.bootstrap.min.js"></script>
    <script src="plugins/chartjs/Chart.min.js"></script>
    <script src="plugins/flot/jquery.flot.min.js"></script>
    <script src="plugins/flot/jquery.flot.resize.min.js"></script>
    <script src="plugins/flot/jquery.flot.pie.min.js"></script>
    <script src="plugins/flot/jquery.flot.categories.min.js"></script>
    <script src="plugins/ionslider/ion.rangeSlider.min.js"></script>
    <script src="plugins/bootstrap-slider/bootstrap-slider.js"></script>
    <script src="plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
    <script src="plugins/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="plugins/common.js"></script>
    <script>
        $(document).ready(function() {
            // 选择框
            $(".select2").select2();

            // WYSIHTML5编辑器
            $(".textarea").wysihtml5({
                locale: 'zh-CN'
            });
        });
        function writeImage(src,id,width,heigth){
            $(id).attr("src",src);
            $(id).attr("width",width);
            $(id).attr("heigth",heigth);
        }
        $(function () {
            var info;
            $.ajax({
                url:ipAddr+"/information/selectIndexInfo",
                dataType:"json",
                type:"get",
                async:false,
                xhrFields: {
                    withCredentials: true //允许跨域带Cookie
                },
                success:function (indexInfo) {
                    info=indexInfo;
                        for (var i = 1; i <=4; i++) {
                            if(indexInfo.bars[i].image==null){
                                continue;
                            }
                            writeImage(indexInfo.bars[i].image,"#desImage"+i,"304","145");
                            $("#des"+i).val(indexInfo.bars[i].description);
                            $("#des").val(indexInfo.description);
                        }
                    for (var i = 1; i <= 8; i++) {
                        if(indexInfo.imageUrl[i]==null){
                            continue;
                        }
                        writeImage(indexInfo.imageUrl[i],"#image"+i,"249.75","166.25")
                    }
                },
                error:function (XMLHttpRequest, textStatus, errorThrown) {
                    if(XMLHttpRequest.status==403){
                        alert("权限不足");
                        location.href="index.html"
                    }
                }
            });
            $("#save").click(function () {
                info.description=$("#des").val();
                info.bars[1].description=$("#des1").val();
                info.bars[2].description=$("#des2").val();
                info.bars[3].description=$("#des3").val();
                info.bars[4].description=$("#des4").val();
                $.ajax({
                    url:ipAddr+"/information/updateIndexInfo",
                    contentType:"application/json",
                    data:JSON.stringify(info),
                    type:"post",
                    dataType:"json",
                    xhrFields: {
                        withCredentials: true //允许跨域带Cookie
                    },
                    success:function (flag) {
                        if(flag){
                            alert("修改成功");
                            location.reload();
                        }else {
                            alert("修改失败");
                        }
                    },
                    error:function (XMLHttpRequest, textStatus, errorThrown) {
                        if(XMLHttpRequest.status==403){
                            alert("权限不足");
                            location.href="index.html"
                        }
                    }
                })
            });
            $("#desImg1").on('change',function () {
                var src = add("#desImg1");
                info.bars[1].image=src;
                writeImage(info.bars[1].image,"#desImage1","304","145");
            });
            $("#desImg2").on('change',function () {
                var src = add("#desImg2");
                info.bars[2].image=src;
                writeImage(info.bars[2].image,"#desImage2","304","145");
            });
            $("#desImg3").on('change',function () {
                var src = add("#desImg3");
                info.bars[3].image=src;
                writeImage(info.bars[3].image,"#desImage3","304","145");
            });
            $("#desImg4").on('change',function () {
                var src = add("#desImg4");
                info.bars[4].image=src;
                writeImage(info.bars[4].image,"#desImage4","304","145");
            });
            $("#img1").on('change',function () {
                var src = add("#img1");
                info.imageUrl[1]=src;
                writeImage(info.imageUrl[1],"#image1","249.75","166.25");
            });
            $("#img2").on('change',function () {
                var src = add("#img2");
                info.imageUrl[2]=src;
                writeImage(info.imageUrl[2],"#image2","249.75","166.25");
            });
            $("#img3").on('change',function () {
                var src = add("#img3");
                info.imageUrl[3]=src;
                writeImage(info.imageUrl[3],"#image3","249.75","166.25");
            });
            $("#img4").on('change',function () {
                var src = add("#img4");
                info.imageUrl[4]=src;
                writeImage(info.imageUrl[4],"#image4","249.75","166.25");
            });
            $("#img5").on('change',function () {
                var src = add("#img5");
                info.imageUrl[5]=src;
                writeImage(info.imageUrl[5],"#image5","249.75","166.25");
            });
            $("#img6").on('change',function () {
                var src = add("#img6");
                info.imageUrl[6]=src;
                writeImage(info.imageUrl[6],"#image6","249.75","166.25");
            });
            $("#img7").on('change',function () {
                var src = add("#img7");
                info.imageUrl[7]=src;
                writeImage(info.imageUrl[7],"#image7","249.75","166.25");
            });
            $("#img8").on('change',function () {
                var src = add("#img8");
                info.imageUrl[8]=src;
                writeImage(info.imageUrl[8],"#image8","249.75","166.25");
            });
        });

        // 设置激活菜单
        function setSidebarActive(tagUri) {
            var liObj = $("#" + tagUri);
            if (liObj.length > 0) {
                liObj.parent().parent().addClass("active");
                liObj.addClass("active");
            }
        }

        $(document).ready(function() {

            // 激活导航位置
            setSidebarActive("admin-datalist");

            // 列表按钮 
            $("#dataList td input[type='checkbox']").iCheck({
                checkboxClass: 'icheckbox_square-blue',
                increaseArea: '20%'
            });
            // 全选操作 
            $("#selall").click(function() {
                var clicks = $(this).is(':checked');
                if (!clicks) {
                    $("#dataList td input[type='checkbox']").iCheck("uncheck");
                } else {
                    $("#dataList td input[type='checkbox']").iCheck("check");
                }
                $(this).data("clicks", !clicks);
            });
        });
        $("#header").load("header.html");
        $("#aside").load("aside.html");
    </script>
</body>

</html>